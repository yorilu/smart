/*!
 * Ratchet's Gruntfile
 * http://goratchet.com
 * Copyright 2014 Connor Sears
 * Licensed under MIT (https://github.com/twbs/ratchet/blob/master/LICENSE)
 */

module.exports=function(e){e.util.linefeed="\n",RegExp.quote=function(e){return e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")};var t=require("./grunt/ratchicons-data-generator.js");e.initConfig({pkg:e.file.readJSON("package.json"),meta:{distPath:"dist/",docsPath:"docs/dist/",docsAssetsPath:"docs/assets/"},banner:'/*!\n * =====================================================\n * Ratchet v<%= pkg.version %> (<%= pkg.homepage %>)\n * Copyright <%= grunt.template.today("yyyy") %> <%= pkg.author %>\n * Licensed under <%= pkg.license %> (https://github.com/twbs/ratchet/blob/master/LICENSE)\n *\n * v<%= pkg.version %> designed by @connors.\n * =====================================================\n */\n',clean:{dist:["<%= meta.distPath %>","<%= meta.docsPath %>"]},concat:{ratchet:{options:{banner:"<%= banner %>"},src:["js/modals.js","js/popovers.js","js/push.js","js/segmented-controllers.js","js/sliders.js","js/toggles.js"],dest:"<%= meta.distPath %>js/<%= pkg.name %>.js"}},sass:{options:{banner:"<%= banner %>",style:"expanded",unixNewlines:!0},dist:{files:{"<%= meta.distPath %>css/<%= pkg.name %>.css":"sass/ratchet.scss","<%= meta.distPath %>css/<%= pkg.name %>-theme-ios.css":"sass/theme-ios.scss","<%= meta.distPath %>css/<%= pkg.name %>-theme-android.css":"sass/theme-android.scss","<%= meta.docsAssetsPath %>css/docs.css":"sass/docs.scss"}}},csscomb:{options:{config:"sass/.csscomb.json"},dist:{files:{"<%= meta.distPath %>/css/<%= pkg.name %>.css":"<%= meta.distPath %>/css/<%= pkg.name %>.css","<%= meta.distPath %>/css/<%= pkg.name %>-theme-android.css":"<%= meta.distPath %>/css/<%= pkg.name %>-theme-android.css","<%= meta.distPath %>/css/<%= pkg.name %>-theme-ios.css":"<%= meta.distPath %>/css/<%= pkg.name %>-theme-ios.css"}},docs:{files:{"<%= meta.docsAssetsPath %>/css/docs.css":"<%= meta.docsAssetsPath %>/css/docs.css"}}},copy:{fonts:{expand:!0,src:"fonts/*",dest:"<%= meta.distPath %>/"},docs:{expand:!0,cwd:"<%= meta.distPath %>",src:["**/*"],dest:"<%= meta.docsPath %>"}},cssmin:{options:{banner:"",keepSpecialComments:"*"},ratchet:{src:"<%= meta.distPath %>css/<%= pkg.name %>.css",dest:"<%= meta.distPath %>css/<%= pkg.name %>.min.css"},theme:{files:{"<%= meta.distPath %>css/<%= pkg.name %>-theme-ios.min.css":"<%= meta.distPath %>css/<%= pkg.name %>-theme-ios.css","<%= meta.distPath %>css/<%= pkg.name %>-theme-android.min.css":"<%= meta.distPath %>css/<%= pkg.name %>-theme-android.css"}},docs:{src:["<%= meta.docsAssetsPath %>css/docs.css","<%= meta.docsAssetsPath %>css/pygments-manni.css"],dest:"<%= meta.docsAssetsPath %>css/docs.min.css"}},uglify:{options:{banner:"<%= banner %>",compress:!0,mangle:!0,preserveComments:!1},ratchet:{src:"<%= concat.ratchet.dest %>",dest:"<%= meta.distPath %>js/<%= pkg.name %>.min.js"},docs:{src:["<%= meta.docsAssetsPath %>js/docs.js","<%= meta.docsAssetsPath %>js/fingerblast.js"],dest:"<%= meta.docsAssetsPath %>js/docs.min.js"}},watch:{scripts:{files:["<%= meta.srcPath %>/**/*.scss"],tasks:["sass"]}},jekyll:{docs:{}},jshint:{options:{jshintrc:"js/.jshintrc"},grunt:{src:["Gruntfile.js","grunt/*.js"]},src:{src:"js/*.js"},docs:{src:["<%= meta.docsAssetsPath %>/js/docs.js","<%= meta.docsAssetsPath %>/js/fingerblast.js"]}},jscs:{options:{config:"js/.jscsrc"},grunt:{src:"<%= jshint.grunt.src %>"},src:{src:"<%= jshint.src.src %>"},docs:{src:"<%= jshint.docs.src %>"}},csslint:{options:{csslintrc:"sass/.csslintrc"},src:["<%= meta.distPath %>/css/<%= pkg.name %>.css","<%= meta.distPath %>/css/<%= pkg.name %>-theme-android.css","<%= meta.distPath %>/css/<%= pkg.name %>-theme-ios.css"],docs:{options:{ids:!1},src:["<%= meta.docsAssetsPath %>/css/docs.css"]}},validation:{options:{charset:"utf-8",doctype:"HTML5",failHard:!0,reset:!0,relaxerror:["Bad value apple-mobile-web-app-title for attribute name on element meta: Keyword apple-mobile-web-app-title is not registered.","Bad value apple-mobile-web-app-status-bar-style for attribute name on element meta: Keyword apple-mobile-web-app-status-bar-style is not registered.","Bad value X-UA-Compatible for attribute http-equiv on element meta.","Attribute ontouchstart not allowed on element body at this point."]},files:{src:"_site/**/*.html"}},sed:{versionNumber:{pattern:function(){var t=e.option("oldver");return t?RegExp.quote(t):t}(),replacement:e.option("newver"),recursive:!0}}}),require("load-grunt-tasks")(e,{scope:"devDependencies"}),require("time-grunt")(e),e.registerTask("dist-css",["sass","csscomb","cssmin"]),e.registerTask("dist-js",["concat","uglify"]),e.registerTask("dist",["clean","dist-css","dist-js","copy","build-ratchicons-data"]),e.registerTask("validate-html",["jekyll","validation"]),e.registerTask("build",["dist"]),e.registerTask("default",["dist"]),e.registerTask("test",["dist","csslint","jshint","jscs","validate-html"]),e.registerTask("build-ratchicons-data",t),e.registerTask("change-version-number","sed")}