!function(e,t){function n(e,t){var n=[];for(var r in e.path){if(e.path[r]!==t.path[r])break;n.push(e.path[r])}return n}function r(t){if(Object.keys)return Object.keys(t);var n=[];return e.forEach(t,function(e,t){n.push(t)}),n}function i(e,t){var n=[];for(var r in e)t&&-1!==t.indexOf(r)||n.push(r);return n}function s(e,t){if(Array.prototype.indexOf)return e.indexOf(t,Number(arguments[2])||0);var n=e.length>>>0,r=Number(arguments[2])||0;for(r=0>r?Math.ceil(r):Math.floor(r),0>r&&(r+=n);n>r;r++)if(r in e&&e[r]===t)return r;return-1}function o(e,t,i,o){var u,a=n(i,o),f={},l=[];for(var c in a)if(a[c].params&&(u=g(a[c].params)?a[c].params:r(a[c].params),u.length))for(var h in u)s(l,u[h])>=0||(l.push(u[h]),f[u[h]]=e[u[h]]);return m({},f,t)}function u(e,t){return m(new(m(function(){},{prototype:e})),t)}function a(e){d.push(e)}function f(){S=t}function l(t,n){var r=n,i=r.inheritParams,s=r.protoKeys,o=r.map,u={},a={},f=!1;this.registerStickyState=function(e){a[e.name]=e},this.enableDebug=this.debugMode=function(t){return e.isDefined(t)&&(f=t),f},this.$get=["$rootScope","$state","$stateParams","$injector","$log",function(t,n,r,a,l){function c(){var t={};return e.forEach(u,function(e){for(var n=h(e),r=0;r<n.length;r++){var i=n[r].parent;t[i.name]=t[i.name]||[],t[i.name].push(e)}t[""]&&(t.__inactives=t[""])}),t}function h(e){var t=[];if(!e)return t;do e.sticky&&t.push(e),e=e.parent;while(e);return t.reverse(),t}function p(e,t,n){if(e[n]===t[n])return{from:!1,to:!1};var r=n<e.length&&e[n].self.sticky,i=n<t.length&&t[n].self.sticky;return{from:r,to:i}}function d(e,t,n,r){if(r)return"updateStateParams";var i=u[e.self.name];if(!i)return"enter";if(e.self===n)return"updateStateParams";var s=m(t,i.locals.globals.$stateParams,e.ownParams);return s?"reactivate":"updateStateParams"}function v(e,t){var n=u[e.name];if(!n)return null;if(!t)return n;var r=m(t,n.locals.globals.$stateParams,e.ownParams);return r?n:null}function m(t,n,r){if(!e.isArray(r)&&e.isObject(r)&&(r=s(r,["$$keys","$$values","$$equals","$$validates","$$new","$$parent"])),!r){r=[];for(var i in t)r.push(i)}for(var o=0;o<r.length;o++){var u=r[o];if(t[u]!=n[u])return!1}return!0}var g={getInactiveStates:function(){var t=[];return e.forEach(u,function(e){t.push(e)}),t},getInactiveStatesByParent:function(){return c()},processTransition:function(t){var s={inactives:[],enter:[],exit:[],keep:0},u=t.fromState.path,a=t.fromParams,f=t.toState.path,l=t.toParams,h=t.reloadStateTree,v=t.options,g=0,y=f[g];for(v.inherit&&(l=i(r,l||{},n.$current,t.toState));y&&y===u[g]&&m(l,a,y.ownParams);)y=f[++g];s.keep=g;var b,w,E,S={},x=p(u,f,g),T=!!v.reload;for(b=g;b<f.length;b++){var N=x.to?d(f[b],l,h,T):"enter";T=T||"updateStateParams"==N,s.enter[b]=N,"reactivate"==N&&(E=S[f[b].name]=f[b]),"updateStateParams"==N&&(w=S[f[b].name]=f[b])}E=E?E.self.name+".":"",w=w?w.self.name+".":"";var C=c(),k=[""].concat(o(u.slice(0,g),function(e){return e.self.name}));for(e.forEach(k,function(e){for(var t=C[e],n=0;t&&n<t.length;n++){var r=t[n];S[r.name]||E&&0===r.self.name.indexOf(E)||w&&0===r.self.name.indexOf(w)||s.inactives.push(r)}}),b=g;b<u.length;b++){var L="exit";x.from&&(s.inactives.push(u[b]),L="inactivate"),s.exit[b]=L}return s},stateInactivated:function(e){u[e.self.name]=e,e.self.status="inactive",e.self.onInactivate&&a.invoke(e.self.onInactivate,e.self,e.locals.globals)},stateReactivated:function(e){u[e.self.name]&&delete u[e.self.name],e.self.status="entered",e.self.onReactivate&&a.invoke(e.self.onReactivate,e.self,e.locals.globals)},stateExiting:function(t,n,r){var i={};e.forEach(n,function(e){i[e.self.name]=!0}),e.forEach(u,function(n,r){!i[r]&&n.includes[t.name]&&(f&&l.debug("Exiting "+r+" because it's a substate of "+t.name+" and wasn't found in ",i),n.self.onExit&&a.invoke(n.self.onExit,n.self,n.locals.globals),e.forEach(n.locals,function(e,t){delete k.locals[t]}),n.locals=null,n.self.status="exited",delete u[r])}),r&&a.invoke(r,t.self,t.locals.globals),t.locals=null,t.self.status="exited",delete u[t.self.name]},stateEntering:function(e,t,n,r){var i=v(e);if(i&&(r||!v(e,t))){var s=e.locals;this.stateExiting(i),e.locals=s}e.self.status="entered",n&&a.invoke(n,e.self,e.locals.globals)},reset:function(e,r){var i=n.get(e),s=v(i,r);return s?(g.stateExiting(s),t.$broadcast("$viewContentLoading"),!0):!1}};return g}]}function c(e){return{resolve:{},locals:{globals:N&&N.locals&&N.locals.globals},views:{},self:{},params:{},ownParams:A.hasParamSet?{$$equals:function(){return!0}}:[],surrogateType:e}}var h=e.module("ct.ui.router.extras.core",["ui.router"]),p={},d=[];h.config(["$stateProvider","$injector",function(t){t.decorator("parent",function(t,n){return p[t.self.name]=t,t.self.$$state=function(){return p[t.self.name]},e.forEach(d,function(e){e(t)}),n(t)})}]);var v=e.forEach,m=e.extend,g=e.isArray,y=function(e,t){var n=[];return v(e,function(e,r){n.push(t(e,r))}),n},b=function(e){return y(e,function(e,t){return t})},w=function(e,t){var n=[];return v(e,function(e,r){t(e,r)&&n.push(e)}),n},E=function(e,t){var n={};return v(e,function(e,r){t(e,r)&&(n[r]=e)}),n};h.provider("uirextras_core",function(){var t={internalStates:p,onStateRegistered:a,forEach:v,extend:m,isArray:g,map:y,keys:b,filter:w,filterObj:E,ancestors:n,objectKeys:r,protoKeys:i,arraySearch:s,inheritParams:o,inherit:u};e.extend(this,t),this.$get=function(){return t}});var S;e.module("ct.ui.router.extras.dsr",["ct.ui.router.extras.core"]).config(["$provide",function(e){var t;e.decorator("$state",["$delegate","$q",function(e,n){return t=e.transitionTo,e.transitionTo=function(r,i,s){return s.ignoreDsr&&(S=s.ignoreDsr),t.apply(e,arguments).then(function(e){return f(),e},function(e){return f(),n.reject(e)})},e}])}]),e.module("ct.ui.router.extras.dsr").service("$deepStateRedirect",["$rootScope","$state","$injector",function(n,r,i){function s(e){var t=e.name;return c.hasOwnProperty(t)?c[t]:void u(t)}function o(t){var n=t.deepStateRedirect||t.dsr;if(!n)return{dsr:!1};var r={dsr:!0};return e.isFunction(n)?r.fn=n:e.isObject(n)&&(r=e.extend(r,n)),e.isString(r["default"])&&(r["default"]={state:r["default"]}),r.fn||(r.fn=["$dsr$",function(e){return e.redirect.state!=e.to.state}]),r}function u(e){var n=r.get(e);if(!n)return!1;var i=o(n);i.dsr&&(c[n.name]=h,l[e]===t&&(l[e]={}));var s=n.$$state&&n.$$state().parent;if(s){var a=u(s.self.name);a&&c[n.name]===t&&(c[n.name]=p)}return c[n.name]||!1}function a(n,r){r===!0&&(r=Object.keys(n)),(null===r||r===t)&&(r=[]);var i={};return e.forEach(r.sort(),function(e){i[e]=n[e]}),i}function f(t,n){function r(e){return e?e.toString():e}var i=a(t,n),s={};return e.forEach(i,function(e,t){s[t]=r(e)}),e.toJson(s)}var l={},c={},h="Redirect",p="AncestorRedirect";return n.$on("$stateChangeStart",function(t,n,u){var c=o(n);if(!S&&(s(n)===h||c["default"])){var p=f(u,c.params),d=l[n.name][p]||c["default"];if(d){var v={redirect:{state:d.state,params:d.params},to:{state:n.name,params:u}},m=i.invoke(c.fn,n,{$dsr$:v});if(m){m.state&&(d=m),t.preventDefault();var g=a(u,c.params);r.go(d.state,e.extend(g,d.params))}}}}),n.$on("$stateChangeSuccess",function(t,n,i){var u=s(n);if(u){var a=n.name;e.forEach(l,function(t,n){var s=o(r.get(n)),u=f(i,s.params);(a==n||-1!=a.indexOf(n+"."))&&(l[n][u]={state:a,params:e.copy(i)})})}}),{reset:function(t,n){if(t){var i=r.get(t);if(!i)throw new Error("Unknown state: "+t);if(l[i.name])if(n){var s=f(n,o(i).params);delete l[i.name][s]}else l[i.name]={}}else e.forEach(l,function(e,t){l[t]={}})}}}]),e.module("ct.ui.router.extras.dsr").run(["$deepStateRedirect",function(){}]),e.module("ct.ui.router.extras.sticky",["ct.ui.router.extras.core"]);var x=e.module("ct.ui.router.extras.sticky");l.$inject=["$stateProvider","uirextras_coreProvider"],x.provider("$stickyState",l);var T,N,C,k,p={},L=[],A={hasParamSet:!1};e.module("ct.ui.router.extras.sticky").run(["$stickyState",function(e){T=e}]),e.module("ct.ui.router.extras.sticky").config(["$provide","$stateProvider","$stickyStateProvider","$urlMatcherFactoryProvider","uirextras_coreProvider",function(n,r,i,s,o){function u(t,n,r){function i(e,t,n){return e[t]?e[t].toUpperCase()+": "+n.self.name:"("+n.self.name+")"}var s=p(r.inactives,function(e){return e.self.name}),o=p(n.toState.path,function(e,t){return i(r.enter,t,e)}),u=p(n.fromState.path,function(e,t){return i(r.exit,t,e)}),a=n.fromState.self.name+": "+e.toJson(n.fromParams)+":  -> "+n.toState.self.name+": "+e.toJson(n.toParams);t.debug("   Current transition: ",a),t.debug("Before transition, inactives are:   : ",p(T.getInactiveStates(),function(e){return e.self.name})),t.debug("After transition,  inactives will be: ",s),t.debug("Transition will exit:  ",u),t.debug("Transition will enter: ",o)}function a(e,t,n){e.debug("Current state: "+t.self.name+", inactive states: ",p(T.getInactiveStates(),function(e){return e.self.name}));for(var r=function(e,t){return"'"+t+"' ("+e.$$state.name+")"},i=function(e,t){return"globals"!=t&&"resolve"!=t},s=function(e){var t=p(d(e.locals,i),r).join(", ");return"("+(e.self.name?e.self.name:"root")+".locals"+(t.length?": "+t:"")+")"},o=s(t),u=t.parent;u&&u!==t;)""===u.self.name&&(o=s(n.$current.path[0])+" / "+o),o=s(u)+" / "+o,t=u,u=t.parent;e.debug("Views: "+o)}var f=o,l=f.internalStates,h=f.inherit,p=(f.inheritParams,f.map),d=f.filterObj;A.hasParamSet=!!s.ParamSet,k=e.extend(new c("__inactives"),{self:{name:"__inactives"}}),N=C=t,L=[],o.onStateRegistered(function(e){e.self.sticky===!0&&i.registerStickyState(e.self)});var v;n.decorator("$state",["$delegate","$log","$q",function(n,r,o){return N=n.$current,l[""]=N,N.parent=k,k.parent=t,N.locals=h(k.locals,N.locals),delete k.locals.globals,v=n.transitionTo,n.transitionTo=function(t,f,h){function d(t){var n=e.extend(new c("reactivate_phase1"),{locals:t.locals});return n.self=e.extend({},t.self),n}function m(t){var n=e.extend(new c("reactivate_phase2"),t),r=n.self.onEnter;return n.resolve={},n.views={},n.self.onEnter=function(){n.locals=t.locals,T.stateReactivated(t)},W.addRestoreFunction(function(){t.self.onEnter=r}),n}function g(e){var t=new c("inactivate");t.self=e.self;var n=e.self.onExit;return t.self.onExit=function(){T.stateInactivated(e)},W.addRestoreFunction(function(){e.self.onExit=n}),t}function y(e,t){var n=e.self.onEnter;return e.self.onEnter=function(){T.stateEntering(e,t,n)},W.addRestoreFunction(function(){e.self.onEnter=n}),e}function b(e,t){var n=e.self.onEnter;return e.self.onEnter=function(){T.stateEntering(e,t,n,!0)},W.addRestoreFunction(function(){e.self.onEnter=n}),e}function w(e){var t=e.self.onExit;return e.self.onExit=function(){T.stateExiting(e,U,t)},W.addRestoreFunction(function(){e.self.onExit=t}),e}var E=i.debugMode();k.locals||(k.locals=N.locals);var S=L.length;C&&(C(),E&&r.debug("Restored paths from pending transition"));var x,O,M,_,D=n.$current,H=n.params,B=h&&h.relative||n.$current,I=n.get(t,B),q=[],U=[];f=f||{},arguments[1]=f;var z=function(){},W=function(){x&&(X.path=x,x=null),O&&(D.path=O,O=null),e.forEach(W.restoreFunctions,function(e){e()}),W=z,C=null,L.splice(S,1)};if(W.restoreFunctions=[],W.addRestoreFunction=function(e){this.restoreFunctions.push(e)},I){var X=l[I.name];if(X){x=X.path,O=D.path;var V=h&&h.reload||!1,$=V&&(V===!0?x[0].self:n.get(V,B));h&&V&&V!==!0&&delete h.reload;var J={toState:X,toParams:f||{},fromState:D,fromParams:H||{},options:h,reloadStateTree:$};if(L.push(J),C=W,$){J.toParams.$$uirouterextrasreload=Math.random();var K=$.$$state().params,Q=$.$$state().ownParams;if(A.hasParamSet){var G=new s.Param("$$uirouterextrasreload");K.$$uirouterextrasreload=Q.$$uirouterextrasreload=G,W.restoreFunctions.push(function(){delete K.$$uirouterextrasreload,delete Q.$$uirouterextrasreload})}else K.push("$$uirouterextrasreload"),Q.push("$$uirouterextrasreload"),W.restoreFunctions.push(function(){K.length=K.length-1,Q.length=Q.length-1})}M=T.processTransition(J),E&&u(r,J,M);var Y=X.path.slice(0,M.keep),Z=D.path.slice(0,M.keep);e.forEach(k.locals,function(e,t){-1!=t.indexOf("@")&&delete k.locals[t]});for(var et=0;et<M.inactives.length;et++){var tt=M.inactives[et].locals;e.forEach(tt,function(e,t){tt.hasOwnProperty(t)&&-1!=t.indexOf("@")&&(k.locals[t]=e)})}if(e.forEach(M.enter,function(e,t){var n,r=X.path[t];"reactivate"===e?(n=d(r),Y.push(n),Z.push(n),q.push(m(r)),_=r):"updateStateParams"===e?(n=b(r),Y.push(n),_=r):"enter"===e&&Y.push(y(r))}),e.forEach(M.exit,function(e,t){var n=D.path[t];"inactivate"===e?(Z.push(g(n)),U.push(n)):"exit"===e&&(Z.push(w(n)),U.push(n))}),q.length&&e.forEach(q,function(e){Y.push(e)}),X===_){var nt=_.self.name+".",rt=T.getInactiveStates(),it=[];rt.forEach(function(e){0===e.self.name.indexOf(nt)&&it.push(e)}),it.sort(),it.reverse(),Z=Z.concat(p(it,function(e){return w(e)})),U=U.concat(it)}X.path=Y,D.path=Z;var st=function(e){return(e.surrogateType?e.surrogateType+":":"")+e.self.name};E&&r.debug("SurrogateFromPath: ",p(Z,st)),E&&r.debug("SurrogateToPath:   ",p(Y,st))}}var ot=v.apply(n,arguments);return ot.then(function(e){return W(),E&&a(r,l[e.name],n),e.status="active",e},function(e){return W(),E&&"transition prevented"!==e.message&&"transition aborted"!==e.message&&"transition superseded"!==e.message&&(r.debug("transition failed",e),console.log(e.stack)),o.reject(e)})},n}])}]),function(e,t){function n(t,n,r,i){function s(t,n){var r=e.isObject(t)?t.name:t;return n?p[r]:c[r]}function o(e,t){if(t.name){var n=t.name.split(/\./);for("."===t.name.charAt(0)&&(n[0]=e.current.name);n.length;){var r=n.join(".");if(e.get(r,{relative:e.current}))return null;if(p[r])return p[r];n.pop()}}if(t.url){var i=[];for(var s in p){var o=p[s].urlMatcher;o&&o.exec(t.url)&&i.push(p[s])}for(var u=i.slice(0),a=i.length-1;a>=0;a--)for(var f=0;f<u.length;f++)i[a]===u[f].parentFutureState&&i.splice(a,1);return i[0]}}function u(e,t){d=!0;var n=e.get("$q");if(!t){var r=n.defer();return r.reject("No lazyState passed in "+t),r.promise}var i=n.when([]),s=t.parentFutureState;s&&p[s.name]&&(i=u(e,p[s.name]));var o=t.type,a=h[o];if(!a)throw Error("No state factory for futureState.type: "+(t&&t.type));return i.then(function(n){var r=e.invoke(a,a,{futureState:t});return r.then(function(e){return e&&n.push(e),n})})["finally"](function(){delete p[t.name]})}function a(e,n){var r=!1,i=["$rootScope","$urlRouter","$state",function(i,s,a){function l(){r=!0,s.sync(),r=!1}if(!m)return f().then(l),void (m=!0);var c=o(a,{url:n.path()});return c?void u(e,c).then(function(e){e.forEach(function(e){e&&(!a.get(e)||e.name&&!a.get(e.name))&&t.state(e)}),d=!1,l()},function(){d=!1,l()}):e.invoke(y)}];if(!d){var s=r?y:i;return e.invoke(s)}}var f,l=i,c=l.internalStates,h={},p={},d=!1,v=[],m=!1,g=this;this.addResolve=function(e){v.push(e)},this.stateFactory=function(e,t){h[e]=t},this.futureState=function(t){t.stateName&&(t.name=t.stateName),t.urlPrefix&&(t.url="^"+t.urlPrefix),p[t.name]=t;var n,i=t.name.split(/\./).slice(0,-1).join("."),o=s(t.parent||i);if(o)n=o.url||o.navigable.url;else if(""===i)n=r.compile("");else{var u=s(t.parent||i,!0);if(!u)throw new Error("Couldn't determine parent state of future state. FutureState:"+e.toJson(t));var a=u.urlMatcher.source.replace(/\*rest$/,"");n=r.compile(a),t.parentFutureState=u}t.url&&(t.urlMatcher="^"===t.url.charAt(0)?r.compile(t.url.substring(1)+"*rest"):n.concat(t.url+"*rest"))},this.get=function(){return e.extend({},p)};var y=["$log","$location",function(e,t){e.debug("Unable to map "+t.path())}];n.otherwise(a),n.otherwise=function(t){if(e.isString(t)){var r=t;t=function(){return r}}else if(!e.isFunction(t))throw new Error("'rule' must be a function");return y=["$injector","$location",t],n};var b={getResolvePromise:function(){return f()}};this.$get=["$injector","$state","$q","$rootScope","$urlRouter","$timeout","$log",function(n,r,i,s,a,l,c){function h(){if(s.$on("$stateNotFound",function(e,i,s,a){if(!d){c.debug("event, unfoundState, fromState, fromParams",e,i,s,a);var f=o(r,{name:i.to});if(f){e.preventDefault();var l=u(n,f);l.then(function(e){e.forEach(function(e){e&&(!r.get(e)||e.name&&!r.get(e.name))&&t.state(e)}),r.go(i.to,i.toParams),d=!1},function(e){console.log("failed to lazy load state ",e),r.go(s,a),d=!1})}}}),!f){var h=[];e.forEach(v,function(e){h.push(n.invoke(e))}),f=function(){return i.all(h)}}f().then(function(){l(function(){r.transition?r.transition.then(a.sync,a.sync):a.sync()})})}return h(),b.state=t.state,b.futureState=g.futureState,b.get=g.get,b}]}var r=e.module("ct.ui.router.extras.future",["ct.ui.router.extras.core"]);n.$inject=["$stateProvider","$urlRouterProvider","$urlMatcherFactoryProvider","uirextras_coreProvider"],r.provider("$futureState",n);var i={state:function(e){i.$rootScope&&i.$rootScope.$broadcast("$stateAdded",e)},itsNowRuntimeOhWhatAHappyDay:function(e){i.$rootScope=e},$rootScope:t};r.config(["$stateProvider",function(t){var n=t.state;t.state=function(){var r=n.apply(t,arguments),s=e.isObject(arguments[0])?arguments[0]:arguments[1];return i.state(s),r}}]),r.run(["$futureState",function(e,t){i.itsNowRuntimeOhWhatAHappyDay(t)}])}(e),e.module("ct.ui.router.extras.previous",["ct.ui.router.extras.core","ct.ui.router.extras.transition"]).service("$previousState",["$rootScope","$state",function(e,n){var r=null,i=null,s={};e.$on("$transitionStart",function(e,t){function n(){i=null}function s(){r=i}var o=t.from,u=o.state&&o.state.$$state&&o.state.$$state();u&&u.navigable&&(i=r,r=t.from),t.promise.then(n)["catch"](s)});var o={get:function(e){return e?s[e]:r},go:function(e,t){var r=o.get(e);return n.go(r.state,r.params,t)},memo:function(e,t,i){s[e]=r||{state:n.get(t),params:i}},forget:function(e){e?delete s[e]:r=t}};return o}]),e.module("ct.ui.router.extras.previous").run(["$previousState",function(){}]),e.module("ct.ui.router.extras.transition",["ct.ui.router.extras.core"]).config(["$provide",function(t){t.decorator("$state",["$delegate","$rootScope","$q","$injector",function(t,n,r,i){function s(t){var n=i.invoke,r=i.instantiate;return i.invoke=function(r,i,s){return n(r,i,e.extend({$transition$:t},s))},i.instantiate=function(n,i){return r(n,e.extend({$transition$:t},i))},function(){i.invoke=n,i.instantiate=r}}function o(){h.pop()(),c.pop(),l--}function u(e,t){return function(r){return o(),n.$broadcast("$transitionSuccess",t),e.resolve(r),r}}function a(e,t){return function(i){return o(),n.$broadcast("$transitionError",t,i),e.reject(i),r.reject(i)}}var f=t.transitionTo,l=-1,c=[],h=[];return t.transitionTo=function(){var e=r.defer(),n=c[++l]={promise:e.promise};h[l]=function(){};var i=f.apply(t,arguments);return i.then(u(e,n),a(e,n))},n.$on("$stateChangeStart",function(t,r,i,o,u){var a=l,f=e.extend(c[a],{to:{state:r,params:i},from:{state:o,params:u}}),p=s(f);h[a]=p,n.$broadcast("$transitionStart",f)}),t}])}]),function(){function t(t,n,r){return{scope:{width:"@",height:"@"},restrict:"AE",template:"<svg></svg>",link:function(n,i){function s(t){t=t.map(function(t){return""===t.name?c:e.copy(t)}),e.extend(u,t.reduce(function(e,t){return e[t.name]=t,e},{})),t.forEach(function(e){var t=e.name.split(/\./).slice(0,-1).join("."),n=e.name!=t&&u[t];n&&((n.children||(n.children=[])).push(e),e.px=n.px,e.py=n.py,h.push(e))})}function o(){function e(e){var t=e.name.split(".").pop();return e.sticky&&(t+=" (STICKY)"),e.deepStateRedirect&&(t+=" (DSR)"),t}m=m.data(l.nodes(c),function(e){return e.name}),g=g.data(l.links(h),function(e){return e.target.name}),y=y.data(p),h.forEach(function(e){e.y=70*e.depth});var t=m.enter();y.enter().append("circle").attr("class","active").attr("r",13).attr("cx",function(e){return e.parent.px||100}).attr("cy",function(e){return e.parent.py||100}),t.append("circle").attr("class","node").attr("r",9).attr("cx",function(e){return e.parent.px}).attr("cy",function(e){return e.parent.py}),t.append("text").attr("class","label").attr("x",function(e){return e.parent.px}).attr("y",function(e){return e.parent.py}).attr("text-anchor",function(){return"middle"}).text(e).style("fill-opacity",1),g.enter().insert("path",".node").attr("class","link").attr("d",function(e){var t={x:e.source.px,y:e.source.py};return d({source:t,target:t})});var n=v.transition().duration(w);n.selectAll(".link").attr("d",d);var r={entered:"#AF0",exited:"#777",active:"#0f0",inactive:"#55F",future:"#009"};n.selectAll(".node").attr("cx",function(e){return e.px=e.x}).attr("cy",function(e){return e.py=e.y}).attr("r",function(e){return"active"===e.status?15:10}).style("fill",function(e){return r[e.status]||"#FFF"}),n.selectAll(".label").attr("x",function(e){return e.px=e.x}).attr("y",function(e){return e.py=e.y-15}).attr("transform",function(e){return"rotate(-25 "+e.x+" "+e.y+")"}),n.selectAll(".active").attr("x",function(e){return e.px=e.x}).attr("y",function(e){return e.py=e.y-15})}var u={},a=n.width||400,f=n.height||400,l=d3.layout.tree().size([a-20,f-20]).separation(function(e,t){return e.parent==t.parent?10:25}),c=t.get().filter(function(e){return""===e.name})[0],h=l(c);c.parent=c,c.px=c.x=a/2,c.py=c.y=f/2;var p={};p.px=p.x=c.px,p.py=p.y=c.py;var d=d3.svg.diagonal(),v=d3.select(i.find("svg")[0]).attr("width",a).attr("height",f).append("g").attr("transform","translate(10, 10)"),m=v.selectAll(".node"),g=v.selectAll(".link"),y=v.selectAll(".active"),b=200,w=200;setInterval(o,b),r(function(){n.states=t.get(),e.forEach(h,function(e){var n=t.get(e.name);n&&(e.status=n.status||"exited")})},250),n.$watchCollection("states",function(e,t){var n=(t||[]).map(function(e){return e.name});s((e||[]).filter(function(e){return-1==n.indexOf(e.name)}))}),o(b)}}}var n=e.module("ct.ui.router.extras.statevis",["ct.ui.router.extras.core","ct.ui.router.extras.sticky"]);n.directive("stateVis",["$state","$timeout","$interval",t])}(),e.module("ct.ui.router.extras",["ct.ui.router.extras.core","ct.ui.router.extras.dsr","ct.ui.router.extras.future","ct.ui.router.extras.previous","ct.ui.router.extras.statevis","ct.ui.router.extras.sticky","ct.ui.router.extras.transition"])}(angular)