!function(e){e.module("ct.ui.router.extras.transition",["ct.ui.router.extras.core"]).config(["$provide",function(n){n.decorator("$state",["$delegate","$rootScope","$q","$injector",function(n,r,i,s){function o(n){var r=s.invoke,i=s.instantiate;return s.invoke=function(i,s,o){return r(i,s,e.extend({$transition$:n},o))},s.instantiate=function(r,s){return i(r,e.extend({$transition$:n},s))},function(){s.invoke=r,s.instantiate=i}}function u(){p.pop()(),h.pop(),c--}function a(e,t){return function(n){return u(),r.$broadcast("$transitionSuccess",t),e.resolve(n),n}}function f(e,t){return function(n){return u(),r.$broadcast("$transitionError",t,n),e.reject(n),i.reject(n)}}var l=n.transitionTo,c=-1,h=[],p=[];return n.transitionTo=function(){var e=i.defer(),t=h[++c]={promise:e.promise};p[c]=function(){};var r=l.apply(n,arguments);return r.then(a(e,t),f(e,t))},r.$on("$stateChangeStart",function(n,i,s,u,a){var f=c,l=e.extend(h[f],{to:{state:i,params:s},from:{state:u,params:a}}),d=o(l);p[f]=d,r.$broadcast("$transitionStart",l)}),n}])}])}(angular)