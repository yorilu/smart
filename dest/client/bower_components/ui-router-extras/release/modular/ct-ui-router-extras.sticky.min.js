!function(e,t){function n(t,n){var r=n,i=r.inheritParams,s=r.protoKeys,o=r.map,u={},f={},l=!1;this.registerStickyState=function(e){f[e.name]=e},this.enableDebug=this.debugMode=function(t){return e.isDefined(t)&&(l=t),l},this.$get=["$rootScope","$state","$stateParams","$injector","$log",function(t,n,r,f,h){function p(){var t={};return e.forEach(u,function(e){for(var n=d(e),r=0;r<n.length;r++){var i=n[r].parent;t[i.name]=t[i.name]||[],t[i.name].push(e)}t[""]&&(t.__inactives=t[""])}),t}function d(e){var t=[];if(!e)return t;do e.sticky&&t.push(e),e=e.parent;while(e);return t.reverse(),t}function v(e,t,n){if(e[n]===t[n])return{from:!1,to:!1};var r=n<e.length&&e[n].self.sticky,i=n<t.length&&t[n].self.sticky;return{from:r,to:i}}function m(e,t,n,r){if(r)return"updateStateParams";var i=u[e.self.name];if(!i)return"enter";if(e.self===n)return"updateStateParams";var s=y(t,i.locals.globals.$stateParams,e.ownParams);return s?"reactivate":"updateStateParams"}function g(e,t){var n=u[e.name];if(!n)return null;if(!t)return n;var r=y(t,n.locals.globals.$stateParams,e.ownParams);return r?n:null}function y(t,n,r){if(!e.isArray(r)&&e.isObject(r)&&(r=s(r,["$$keys","$$values","$$equals","$$validates","$$new","$$parent"])),!r){r=[];for(var i in t)r.push(i)}for(var o=0;o<r.length;o++){var u=r[o];if(t[u]!=n[u])return!1}return!0}var b={getInactiveStates:function(){var t=[];return e.forEach(u,function(e){t.push(e)}),t},getInactiveStatesByParent:function(){return p()},processTransition:function(t){var s={inactives:[],enter:[],exit:[],keep:0},u=t.fromState.path,a=t.fromParams,f=t.toState.path,l=t.toParams,c=t.reloadStateTree,h=t.options,d=0,g=f[d];for(h.inherit&&(l=i(r,l||{},n.$current,t.toState));g&&g===u[d]&&y(l,a,g.ownParams);)g=f[++d];s.keep=d;var b,w,E,S={},x=v(u,f,d),T=!!h.reload;for(b=d;b<f.length;b++){var N=x.to?m(f[b],l,c,T):"enter";T=T||"updateStateParams"==N,s.enter[b]=N,"reactivate"==N&&(E=S[f[b].name]=f[b]),"updateStateParams"==N&&(w=S[f[b].name]=f[b])}E=E?E.self.name+".":"",w=w?w.self.name+".":"";var C=p(),k=[""].concat(o(u.slice(0,d),function(e){return e.self.name}));for(e.forEach(k,function(e){for(var t=C[e],n=0;t&&n<t.length;n++){var r=t[n];S[r.name]||E&&0===r.self.name.indexOf(E)||w&&0===r.self.name.indexOf(w)||s.inactives.push(r)}}),b=d;b<u.length;b++){var L="exit";x.from&&(s.inactives.push(u[b]),L="inactivate"),s.exit[b]=L}return s},stateInactivated:function(e){u[e.self.name]=e,e.self.status="inactive",e.self.onInactivate&&f.invoke(e.self.onInactivate,e.self,e.locals.globals)},stateReactivated:function(e){u[e.self.name]&&delete u[e.self.name],e.self.status="entered",e.self.onReactivate&&f.invoke(e.self.onReactivate,e.self,e.locals.globals)},stateExiting:function(t,n,r){var i={};e.forEach(n,function(e){i[e.self.name]=!0}),e.forEach(u,function(n,r){!i[r]&&n.includes[t.name]&&(l&&h.debug("Exiting "+r+" because it's a substate of "+t.name+" and wasn't found in ",i),n.self.onExit&&f.invoke(n.self.onExit,n.self,n.locals.globals),e.forEach(n.locals,function(e,t){delete a.locals[t]}),n.locals=null,n.self.status="exited",delete u[r])}),r&&f.invoke(r,t.self,t.locals.globals),t.locals=null,t.self.status="exited",delete u[t.self.name]},stateEntering:function(e,t,n,r){var i=g(e);if(i&&(r||!g(e,t))){var s=e.locals;this.stateExiting(i),e.locals=s}e.self.status="entered",n&&f.invoke(n,e.self,e.locals.globals)},reset:function(e,r){var i=n.get(e),s=g(i,r);return s?(b.stateExiting(s),t.$broadcast("$viewContentLoading"),!0):!1}};return b}]}function r(e){return{resolve:{},locals:{globals:o&&o.locals&&o.locals.globals},views:{},self:{},params:{},ownParams:l.hasParamSet?{$$equals:function(){return!0}}:[],surrogateType:e}}e.module("ct.ui.router.extras.sticky",["ct.ui.router.extras.core"]);var i=e.module("ct.ui.router.extras.sticky");n.$inject=["$stateProvider","uirextras_coreProvider"],i.provider("$stickyState",n);var s,o,u,a,f=[],l={hasParamSet:!1};e.module("ct.ui.router.extras.sticky").run(["$stickyState",function(e){s=e}]),e.module("ct.ui.router.extras.sticky").config(["$provide","$stateProvider","$stickyStateProvider","$urlMatcherFactoryProvider","uirextras_coreProvider",function(n,i,h,p,d){function v(t,n,r){function i(e,t,n){return e[t]?e[t].toUpperCase()+": "+n.self.name:"("+n.self.name+")"}var o=w(r.inactives,function(e){return e.self.name}),u=w(n.toState.path,function(e,t){return i(r.enter,t,e)}),a=w(n.fromState.path,function(e,t){return i(r.exit,t,e)}),f=n.fromState.self.name+": "+e.toJson(n.fromParams)+":  -> "+n.toState.self.name+": "+e.toJson(n.toParams);t.debug("   Current transition: ",f),t.debug("Before transition, inactives are:   : ",w(s.getInactiveStates(),function(e){return e.self.name})),t.debug("After transition,  inactives will be: ",o),t.debug("Transition will exit:  ",a),t.debug("Transition will enter: ",u)}function m(e,t,n){e.debug("Current state: "+t.self.name+", inactive states: ",w(s.getInactiveStates(),function(e){return e.self.name}));for(var r=function(e,t){return"'"+t+"' ("+e.$$state.name+")"},i=function(e,t){return"globals"!=t&&"resolve"!=t},o=function(e){var t=w(E(e.locals,i),r).join(", ");return"("+(e.self.name?e.self.name:"root")+".locals"+(t.length?": "+t:"")+")"},u=o(t),a=t.parent;a&&a!==t;)""===a.self.name&&(u=o(n.$current.path[0])+" / "+u),u=o(a)+" / "+u,t=a,a=t.parent;e.debug("Views: "+u)}var g=d,y=g.internalStates,b=g.inherit,w=(g.inheritParams,g.map),E=g.filterObj;l.hasParamSet=!!p.ParamSet,a=e.extend(new r("__inactives"),{self:{name:"__inactives"}}),o=u=t,f=[],d.onStateRegistered(function(e){e.self.sticky===!0&&h.registerStickyState(e.self)});var S;n.decorator("$state",["$delegate","$log","$q",function(n,i,d){return o=n.$current,y[""]=o,o.parent=a,a.parent=t,o.locals=b(a.locals,o.locals),delete a.locals.globals,S=n.transitionTo,n.transitionTo=function(t,g,b){function E(t){var n=e.extend(new r("reactivate_phase1"),{locals:t.locals});return n.self=e.extend({},t.self),n}function T(t){var n=e.extend(new r("reactivate_phase2"),t),i=n.self.onEnter;return n.resolve={},n.views={},n.self.onEnter=function(){n.locals=t.locals,s.stateReactivated(t)},U.addRestoreFunction(function(){t.self.onEnter=i}),n}function N(e){var t=new r("inactivate");t.self=e.self;var n=e.self.onExit;return t.self.onExit=function(){s.stateInactivated(e)},U.addRestoreFunction(function(){e.self.onExit=n}),t}function C(e,t){var n=e.self.onEnter;return e.self.onEnter=function(){s.stateEntering(e,t,n)},U.addRestoreFunction(function(){e.self.onEnter=n}),e}function k(e,t){var n=e.self.onEnter;return e.self.onEnter=function(){s.stateEntering(e,t,n,!0)},U.addRestoreFunction(function(){e.self.onEnter=n}),e}function L(e){var t=e.self.onExit;return e.self.onExit=function(){s.stateExiting(e,q,t)},U.addRestoreFunction(function(){e.self.onExit=t}),e}var A=h.debugMode();a.locals||(a.locals=o.locals);var O=f.length;u&&(u(),A&&i.debug("Restored paths from pending transition"));var M,_,D,P,H=n.$current,B=n.params,j=b&&b.relative||n.$current,F=n.get(t,j),I=[],q=[];g=g||{},arguments[1]=g;var R=function(){},U=function(){M&&(z.path=M,M=null),_&&(H.path=_,_=null),e.forEach(U.restoreFunctions,function(e){e()}),U=R,u=null,f.splice(O,1)};if(U.restoreFunctions=[],U.addRestoreFunction=function(e){this.restoreFunctions.push(e)},F){var z=y[F.name];if(z){M=z.path,_=H.path;var W=b&&b.reload||!1,X=W&&(W===!0?M[0].self:n.get(W,j));b&&W&&W!==!0&&delete b.reload;var V={toState:z,toParams:g||{},fromState:H,fromParams:B||{},options:b,reloadStateTree:X};if(f.push(V),u=U,X){V.toParams.$$uirouterextrasreload=Math.random();var $=X.$$state().params,J=X.$$state().ownParams;if(l.hasParamSet){var K=new p.Param("$$uirouterextrasreload");$.$$uirouterextrasreload=J.$$uirouterextrasreload=K,U.restoreFunctions.push(function(){delete $.$$uirouterextrasreload,delete J.$$uirouterextrasreload})}else $.push("$$uirouterextrasreload"),J.push("$$uirouterextrasreload"),U.restoreFunctions.push(function(){$.length=$.length-1,J.length=J.length-1})}D=s.processTransition(V),A&&v(i,V,D);var Q=z.path.slice(0,D.keep),G=H.path.slice(0,D.keep);e.forEach(a.locals,function(e,t){-1!=t.indexOf("@")&&delete a.locals[t]});for(var Y=0;Y<D.inactives.length;Y++){var Z=D.inactives[Y].locals;e.forEach(Z,function(e,t){Z.hasOwnProperty(t)&&-1!=t.indexOf("@")&&(a.locals[t]=e)})}if(e.forEach(D.enter,function(e,t){var n,r=z.path[t];"reactivate"===e?(n=E(r),Q.push(n),G.push(n),I.push(T(r)),P=r):"updateStateParams"===e?(n=k(r),Q.push(n),P=r):"enter"===e&&Q.push(C(r))}),e.forEach(D.exit,function(e,t){var n=H.path[t];"inactivate"===e?(G.push(N(n)),q.push(n)):"exit"===e&&(G.push(L(n)),q.push(n))}),I.length&&e.forEach(I,function(e){Q.push(e)}),z===P){var et=P.self.name+".",tt=s.getInactiveStates(),nt=[];tt.forEach(function(e){0===e.self.name.indexOf(et)&&nt.push(e)}),nt.sort(),nt.reverse(),G=G.concat(w(nt,function(e){return L(e)})),q=q.concat(nt)}z.path=Q,H.path=G;var rt=function(e){return(e.surrogateType?e.surrogateType+":":"")+e.self.name};A&&i.debug("SurrogateFromPath: ",w(G,rt)),A&&i.debug("SurrogateToPath:   ",w(Q,rt))}}var it=S.apply(n,arguments);return it.then(function(e){return U(),A&&m(i,y[e.name],n),e.status="active",e},function(e){return U(),A&&"transition prevented"!==e.message&&"transition aborted"!==e.message&&"transition superseded"!==e.message&&(i.debug("transition failed",e),console.log(e.stack)),d.reject(e)})},n}])}])}(angular)