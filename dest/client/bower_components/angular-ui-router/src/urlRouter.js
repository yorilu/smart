function $UrlRouterProvider(e,t){function o(e){var t=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(e.source);return t!=null?t[1].replace(/\\(.)/g,"$1"):""}function u(e,t){return e.replace(/\$(\$|\d{1,2})/,function(e,n){return t[n==="$"?0:Number(n)]})}function a(e,t,n){if(!n)return!1;var r=e.invoke(t,t,{$match:n});return isDefined(r)?r:!0}function f(t,o,u,a){function h(e,t,n){return f==="/"?e:t?f.slice(0,-1)+e:n?f.slice(1)+e:e}function p(e){function s(e){var n=e(u,t);return n?(isString(n)&&t.replace().url(n),!0):!1}if(e&&e.defaultPrevented)return;var i=c&&t.url()===c;c=undefined;if(i)return!0;var o=n.length,a;for(a=0;a<o;a++)if(s(n[a]))return;r&&s(r)}function d(){return s=s||o.$on("$locationChangeSuccess",p),s}var f=a.baseHref(),l=t.url(),c;return i||d(),{sync:function(){p()},listen:function(){return d()},update:function(e){if(e){l=t.url();return}if(t.url()===l)return;t.url(l),t.replace()},push:function(e,n,r){t.url(e.format(n||{})),c=r&&r.$$avoidResync?t.url():undefined,r&&r.replace&&t.replace()},href:function(n,r,i){if(!n.validates(r))return null;var s=e.html5Mode();angular.isObject(s)&&(s=s.enabled);var o=n.format(r);i=i||{},!s&&o!==null&&(o="#"+e.hashPrefix()+o),o=h(o,s,i.absolute);if(!i.absolute||!o)return o;var u=!s&&o?"/":"",a=t.port();return a=a===80||a===443?"":":"+a,[t.protocol(),"://",t.host(),a,u,o].join("")}}}var n=[],r=null,i=!1,s;this.rule=function(e){if(!isFunction(e))throw new Error("'rule' must be a function");return n.push(e),this},this.otherwise=function(e){if(isString(e)){var t=e;e=function(){return t}}else if(!isFunction(e))throw new Error("'rule' must be a function");return r=e,this},this.when=function(e,n){var r,i=isString(n);isString(e)&&(e=t.compile(e));if(!i&&!isFunction(n)&&!isArray(n))throw new Error("invalid 'handler' in when()");var s={matcher:function(e,n){return i&&(r=t.compile(n),n=["$match",function(e){return r.format(e)}]),extend(function(t,r){return a(t,n,e.exec(r.path(),r.search()))},{prefix:isString(e.prefix)?e.prefix:""})},regex:function(e,t){if(e.global||e.sticky)throw new Error("when() RegExp must not be global or sticky");return i&&(r=t,t=["$match",function(e){return u(r,e)}]),extend(function(n,r){return a(n,t,e.exec(r.path()))},{prefix:o(e)})}},f={matcher:t.isMatcher(e),regex:e instanceof RegExp};for(var l in f)if(f[l])return this.rule(s[l](e,n));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(e){e===undefined&&(e=!0),i=e},this.$get=f,f.$inject=["$location","$rootScope","$injector","$browser"]}$UrlRouterProvider.$inject=["$locationProvider","$urlMatcherFactoryProvider"],angular.module("ui.router.router").provider("$urlRouter",$UrlRouterProvider)