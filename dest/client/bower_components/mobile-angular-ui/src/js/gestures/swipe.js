(function(){var e=angular.module("mobile-angular-ui.gestures.swipe",[]);e.factory("$swipe",[function(){function n(e){var t=e.touches&&e.touches.length?e.touches:[e],n=e.changedTouches&&e.changedTouches[0]||e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]||t[0].originalEvent||t[0];return{x:n.clientX,y:n.clientY}}function r(e,n){var r=[];return angular.forEach(e,function(e){var i=t[e][n];i&&r.push(i)}),r.join(" ")}var e=10,t={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"}};return{bind:function(t,i,s){var o,u,a,f,l=!1;s=s||["mouse","touch"];var c=r(s,"cancel"),h=r(s,"start"),p=r(s,"end"),d=r(s,"move"),v=function(e){a=n(e),l=!0,o=0,u=0,f=a,i.start&&i.start(a,e)},m=function(t){if(!l)return;if(!a)return;var r=n(t);o+=Math.abs(r.x-f.x),u+=Math.abs(r.y-f.y),f=r;if(o<e&&u<e)return;if(u>o){l=!1,i.cancel&&i.cancel(t);return}t.preventDefault(),i.move&&i.move(r,t)},g=function(e){l=!1,i.cancel&&i.cancel(e)},y=function(e){if(!l)return;l=!1,i.end&&i.end(n(e),e)};return t.on(h,v),c&&t.on(c,g),t.on(d,m),t.on(p,y),function(){t.off(h,v),c&&t.off(c,g),t.off(d,m),t.off(p,y),t=h=v=d=m=p=y=c=g=null}}}}]);var t=function(t,n,r){e.directive(t,["$parse","$swipe",function(e,i){var s=75,o=.3,u=30;return function(a,f,l){function d(e){if(!h)return!1;var t=Math.abs(e.y-h.y),r=(e.x-h.x)*n;return p&&t<s&&r>0&&r>u&&t/r<o}var c=e(l[t]),h,p,v=["touch"];angular.isDefined(l.ngSwipeDisableMouse)||v.push("mouse"),i.bind(f,{start:function(e,t){h=e,p=!0},cancel:function(e){p=!1},end:function(e,t){t.stopPropagation(),d(e)&&a.$apply(function(){f.triggerHandler(r),c(a,{$event:t})})}},v)}}])};t("ngSwipeLeft",-1,"swipeleft"),t("ngSwipeRight",1,"swiperight")})()