angular.module("smartCourtLib").directive("lazySrc",["$window","$document","scUtil",function(e,t,n){var r=angular.element(e),i=t[0],s=!1,o=function(){var e=0,t={};return{push:function(n){t[e++]=n,setTimeout(function(){a(n)})},del:function(e){t[e]&&delete t[e]},size:function(){return Object.keys(t).length},get:function(){return t},getOne:function(e){return t[e]}}}(),u=function(t){var n=t[0].getBoundingClientRect(),r=!0;return n.height>0&&n.width>0&&(r=n.top>=0&&n.top+n.height/3<Math.max(i.documentElement.clientHeight,e.innerHeight||0)),r},a=function(e,t,n){var i=this;console.log("------------------");if(t>=0&&n)return u(n.elem)?l(t):!1;o.size()==0?(r.off("scroll",a),r.off("resize",a),s=!1):angular.forEach(o.get(),function(e,t){u(e.elem)&&l(t)})},f=function(){s===!1&&(s=!0,r.on("scroll",a),r.on("resize",a))},l=function(e){var t=o.getOne(e),n=t.elem,r=t.attr.lazySrc;return n.data("cssText")&&(n[0].style.cssText=n.data("cssText")),n.removeClass("ng-lazyload").removeAttr("lazy-src"),n.attr("src",r),e>=0&&o.del(e),!0};return a=n.debounce(a,200),{restrict:"A",scope:{},link:function(e,t,n){t[0].style.cssText&&t.data("cssText",t[0].style.cssText),t.css({"min-width":"1px","min-height":"1px"}),o.push({elem:t,attr:n}),f()}}}])