define(["../models/main.model"],function(){return["$scope","mainModel","scGeo","$log","scUtil",function(e,t,n,r,i){function s(n){n&&n.latitude?u(n.longitude||n.longtitude,n.latitude):u(0,0);var r=t.nearByStadiums.post(e.model.geoPosition);return r.then(function(t){t.length>0&&(e.model.cityId=t[0].cityId),e.model.nearByStadiums=t,o()},function(t){e.model.cityId="1",o()})}function o(){var n=t.topNVideo.post({cityId:e.model.cityId,clientId:"h5"});n.then(function(t){e.hideLoading(),e.model.topVideos=t},function(){},function(){})}function u(t,n){e.model.geoPosition={longtitude:t,latitude:n}}e.isPlaying=!1,e.onEnter=function(){e.showLoading();var t=e.model.geoPosition;if(!t){var r=n.getCurrentPosition();r.then(function(e){s(e)},function(){s()})}else s(t)},e.onExit=function(){r.log("onExit------")},e.playVideo=function(e){r.log("playVideo------"),alert(3),$("video")[0].play(),i.fullScreen($("video")[0]),r.log("end------")}}]})