define(["../models/detail.model"],function(){return["$scope","$stateParams","$window","detailModel","scUtil",function(e,t,n,r,i){function p(e){var t=$(e).parent().attr("data-selected-class");$(e).parent().children().removeClass(t),$(e).addClass(t)}var s=t.courtId,o={},u=!1,a=1,f;e.showMainVideo=!0;var l=function(){var e=[];return{push:function(t){e.push(t)},insert:function(t){e.splice(0,0,t)},get:function(){return e}}}(),c=function(t){u||(u=!0,e.mainLiveUrl=t.mainLiveUrl,e.mainSnapshot=t.mainSnapshot)};e.palyVideo=function(t){e.mainLiveUrl=$(t.target).attr("data-path"),e.playing=!0,i.fullScreen($(".J_MainVideo")[0])},e.onEnter=function(){h(),e.$broadcast("timeline.update.next")},e.toggleVideo=function(){e.showMainVideo=!e.showMainVideo};var h=function(){var t=r.getCourtList.get({stadiumId:s});t.then(function(t){var n=[],r="";for(var i=0;i<t.length;i++){var s=t[i];o[s.sportType]||(o[s.sportType]=[]),r||(r=s.sportType),o[s.sportType].push(s.name)}for(var i in o)n.push(i);e.sportType=n,e.court=o[r]})};e.$on("timeline.update.next",function(t){var n=r.getTimeLineNext.get({stadiumId:s,pageSize:7,pageIndex:a});n.then(function(t){f=t.videos,c(t.mainCourt);if(f&&f.length>0){for(var n=0;n<f.length;n++)a++,l.push(f[n]);console.log(t),e.timeLine=l.get(),e.stadiumName=t.stadiumName,e.date=f[0].date}})}),e.filterSport=function(t,n){if(e.sportType.length==1)return;p(n.target),e.sportType=[t.type],e.court=o[t.type];if(o[t.type].length==1){var t=angular.element($(".J_FilterCourtBtn")[0]).scope();e.filterCourt({scope:t})}},e.filterCourt=function(t,n){n&&p(n.target);var r=t.court,i=[];for(var s=0;s<f.length;s++){var o=f[s];o.courtName==r&&i.push(o)}e.timeLine=i}}]})